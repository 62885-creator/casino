<!DOCTYPE html>
<html>
<head>
  <title>Ultimate Mini Casino</title>
  <style>
    body {
      background:#111;
      color:white;
      font-family:Arial;
      text-align:center;
      padding:20px;
    }
    button,input {
      padding:10px;
      margin:5px;
      font-size:16px;
    }
    .hidden { display:none; }
    .panel {
      border-top:1px solid #333;
      margin-top:20px;
      padding-top:20px;
    }
    button:disabled {
      background:#444;
      color:#777;
    }
    pre {
      white-space:pre-wrap;
      text-align:left;
      max-width:600px;
      margin:auto;
    }
  </style>
</head>
<body>

<h1>üé∞ Ultimate Mini Casino</h1>

<!-- LOGIN -->
<div id="login">
  <input type="password" id="password" placeholder="Password">
  <button onclick="login()">Login</button>
  <p id="loginMsg"></p>
</div>

<!-- GAME -->
<div id="game" class="hidden">
  <h2>Balance: $<span id="balance">0</span></h2>

  <!-- SLOTS -->
  <div class="panel">
    <h3>üé∞ Slots</h3>
    <input type="number" id="slotBet" value="10">
    <button onclick="spinSlots()">Spin</button>
    <p id="slots"></p>
  </div>

  <!-- BLACKJACK -->
  <div class="panel">
    <h3>üÉè Blackjack</h3>
    <input type="number" id="bjBet" value="10">
    <button onclick="playBlackjack()">Deal</button>
    <p id="bjResult"></p>
  </div>

  <!-- POKER -->
  <div class="panel">
    <h3>‚ô†Ô∏è Poker</h3>
    <input type="number" id="pokerBet" value="20">
    <button onclick="playPoker()">Deal Poker</button>
    <pre id="pokerResult"></pre>
  </div>

  <!-- ROULETTE -->
  <div class="panel">
    <h3>üé° Roulette</h3>
    <input type="number" id="rouletteBet" value="10">

    <div>
      <button onclick="placeBet('red')">Red</button>
      <button onclick="placeBet('black')">Black</button>
      <button onclick="placeBet('even')">Even</button>
      <button onclick="placeBet('odd')">Odd</button>
      <button onclick="placeBet('low')">1‚Äì18</button>
      <button onclick="placeBet('high')">19‚Äì36</button>
    </div>

    <div>
      <button onclick="placeBet('dozen1')">1‚Äì12</button>
      <button onclick="placeBet('dozen2')">13‚Äì24</button>
      <button onclick="placeBet('dozen3')">25‚Äì36</button>
    </div>

    <div>
      <input type="number" id="numberBet" placeholder="0‚Äì36" min="0" max="36">
      <button onclick="placeNumberBet()">Straight</button>
    </div>

    <button onclick="spinRoulette()">üéØ SPIN</button>
    <pre id="rouletteResult"></pre>
  </div>
</div>

<!-- ADMIN -->
<div id="adminPanel" class="hidden panel">
  <h3>üîê Admin Panel</h3>
  <button onclick="addMoney()">+ $500</button>
  <button onclick="removeMoney()">- $200</button>
  <p>Total Spins: <span id="spins">0</span></p>
  <p>Total Wins: <span id="wins">0</span></p>
</div>

<script>
/* ========= SECURITY ========= */
const A = btoa("011125");
const G = btoa("1466");

let balance = Number(localStorage.getItem("balance")) || 100;
let spins = Number(localStorage.getItem("spins")) || 0;
let wins = Number(localStorage.getItem("wins")) || 0;
let admin = false;

/* ========= ANTI AUTO CLICKER ========= */
let clickTimes=[], cheatStrikes=0, locked=false;

function antiCheat(){
  if(locked) return false;
  let now=performance.now();
  clickTimes.push(now);
  if(clickTimes.length>15) clickTimes.shift();
  if(clickTimes.length>=10){
    let d=[];
    for(let i=1;i<clickTimes.length;i++) d.push(clickTimes[i]-clickTimes[i-1]);
    let avg=d.reduce((a,b)=>a+b)/d.length;
    let varc=d.reduce((a,b)=>a+Math.abs(b-avg),0)/d.length;
    if(avg<120||varc<5) cheatStrikes++;
  }
  if(cheatStrikes>=3){ lockPlayer(); return false; }
  return true;
}

function lockPlayer(){
  locked=true;
  alert("üö´ Auto-clicker detected");
  document.querySelectorAll("button").forEach(b=>b.disabled=true);
}

document.addEventListener("visibilitychange",()=>{
  if(document.hidden){ cheatStrikes++; if(cheatStrikes>=3) lockPlayer(); }
});

/* ========= CORE ========= */
function login(){
  let p=btoa(password.value);
  if(p===A){ admin=true; start(); adminPanel.classList.remove("hidden"); }
  else if(p===G){ start(); }
  else loginMsg.innerText="Wrong password";
}

function start(){
  login.classList.add("hidden");
  game.classList.remove("hidden");
  update();
}

function update(){
  balanceEl.innerText=balance;
  spinsEl.innerText=spins;
  winsEl.innerText=wins;
  localStorage.setItem("balance",balance);
  localStorage.setItem("spins",spins);
  localStorage.setItem("wins",wins);
}

/* ========= SLOTS ========= */
function spinSlots(){
  if(!antiCheat()) return;
  let bet=+slotBet.value;
  if(bet<=0||bet>balance) return;
  spins++;
  const icons=["üçí","üçã","üîî","‚≠ê","üíé"];
  let r=[0,0,0].map(()=>icons[Math.floor(Math.random()*5)]);
  slots.innerText=r.join(" ");
  if(r[0]===r[1]&&r[1]===r[2]){ balance+=bet*5; wins++; }
  else balance-=bet;
  update();
}

/* ========= BLACKJACK ========= */
function playBlackjack(){
  if(!antiCheat()) return;
  let bet=+bjBet.value;
  if(bet<=0||bet>balance) return;
  spins++;
  let p=Math.floor(Math.random()*11)+10;
  let d=Math.floor(Math.random()*11)+10;
  if((p>d&&p<=21)||d>21){ balance+=bet; wins++; bjResult.innerText="WIN"; }
  else { balance-=bet; bjResult.innerText="LOSE"; }
  update();
}

/* ========= POKER ========= */
const suits=["‚ô†","‚ô•","‚ô¶","‚ô£"];
const values=[2,3,4,5,6,7,8,9,10,"J","Q","K","A"];

function dealHand(){
  let deck=[];
  suits.forEach(s=>values.forEach(v=>deck.push(v+s)));
  deck.sort(()=>Math.random()-0.5);
  return deck.slice(0,5);
}

function rankHand(h){
  let v=h.map(c=>c.slice(0,-1));
  let s=h.map(c=>c.slice(-1));
  let c={}; v.forEach(x=>c[x]=(c[x]||0)+1);
  let g=Object.values(c).sort((a,b)=>b-a);
  let f=s.every(x=>x===s[0]);
  let o=["2","3","4","5","6","7","8","9","10","J","Q","K","A"];
  let i=v.map(x=>o.indexOf(x)).sort((a,b)=>a-b);
  let st=i.every((x,j)=>j===0||x-i[j-1]===1);
  if(st&&f) return 8;
  if(g[0]===4) return 7;
  if(g[0]===3&&g[1]===2) return 6;
  if(f) return 5;
  if(st) return 4;
  if(g[0]===3) return 3;
  if(g[0]===2&&g[1]===2) return 2;
  if(g[0]===2) return 1;
  return 0;
}

function playPoker(){
  if(!antiCheat()) return;
  let bet=+pokerBet.value;
  if(bet<=0||bet>balance) return;
  spins++;
  let p=dealHand(), d=dealHand();
  if(rankHand(p)>rankHand(d)){ balance+=bet*2; wins++; pokerResult.innerText="WIN\n"+p.join(" "); }
  else { balance-=bet; pokerResult.innerText="LOSE\n"+p.join(" "); }
  update();
}

/* ========= ROULETTE ========= */
const redNums=[1,3,5,7,9,12,14,16,18,19,21,23,25,27,30,32,34,36];
let rouletteBets=[];

function placeBet(type,val=null){
  if(!antiCheat()) return;
  let bet=+rouletteBet.value;
  if(bet<=0||bet>balance) return;
  rouletteBets.push({type,val,bet});
  balance-=bet;
  rouletteResult.innerText+=`Bet: ${type} $${bet}\n`;
  update();
}

function placeNumberBet(){
  let n=+numberBet.value;
  if(n>=0&&n<=36) placeBet("number",n);
}

function spinRoulette(){
  if(!antiCheat()||rouletteBets.length===0) return;
  spins++;
  let res=Math.floor(Math.random()*37);
  let color=res===0?"green":redNums.includes(res)?"red":"black";
  rouletteResult.innerText+=`\nResult: ${res} (${color})\n`;
  rouletteBets.forEach(b=>{
    let win=false,p=0;
    if(b.type==="number"){ win=res===b.val; p=35; }
    if(b.type==="red") win=color==="red";
    if(b.type==="black") win=color==="black";
    if(b.type==="even") win=res%2===0&&res!==0;
    if(b.type==="odd") win=res%2===1;
    if(b.type==="low") win=res>=1&&res<=18;
    if(b.type==="high") win=res>=19&&res<=36;
    if(b.type==="dozen1") win=res>=1&&res<=12,p=2;
    if(b.type==="dozen2") win=res>=13&&res<=24,p=2;
    if(b.type==="dozen3") win=res>=25&&res<=36,p=2;
    if(win){ balance+=b.bet*(p+1); wins++; }
  });
  rouletteBets=[];
  update();
}

/* ========= ADMIN ========= */
function addMoney(){ if(admin){ balance+=500; update(); }}
function removeMoney(){ if(admin){ balance-=200; update(); }}

const balanceEl=balance, spinsEl=spins, winsEl=wins;
</script>

</body>
</html>
